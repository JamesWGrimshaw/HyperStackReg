# HyperStackReg ImageJ plugin

![alt text](https://github.com/ved-sharma/HyperStackReg/blob/master/Data/Example%20hyperstack%20-%20before%20vs%20after.gif "Example image")

A single channel time-lapse, Z-stack (C=1, Z>=1, T>1) can be aligned using [StackReg](http://bigwww.epfl.ch/thevenaz/stackreg/) plugin. HyperStackReg plugin, on the other hand, aligns images in a multi-channel hyperstack (C>1, Z>=1, T>1). The main idea of the HyperStackReg plugin is to apply the same transformation matrix to each channel of a hyperstack, so that all the channels of a hyperstack are registered with respect to each other.

# Installation
Put HyperStackReg_.class in the plugins folder and restart ImageJ. "HyperStackReg_" command should be visible under Plugins menu.

# Requires
Just like StackReg, HyperStackReg requires that another plugin called TurboReg should be installed. Please follow directions described on the [StackReg page](http://bigwww.epfl.ch/thevenaz/stackreg/).

# How does the plugin works?
**Step 1:** User opens a multi-channel hyperstack (C>1, Z>=1, T>1) and runs the HyperStackReg_ plugin. In a pop-up dialog window, user then selects the transformation type (Translation, Rigid body, Scaled rotation, Affine) and the channels to be used for transformation matrix computation. All the channels are selected, by default. Behind-the-scene processing details are printed in the Log window.

**Step 2:** The plugin duplicates the user-selected channels (and the corresponding Z and T frames) into a hyperstack and merges those channels into an RGB hyperstack (C=1, Z>=1, T>1). No RGB flattening is done, if user selects a single channel for transformation matrix computation (Step 1).

**Step 3:** The resulting hyperstack is then aligned for each Z and T; and transformation matrices are stored in a text file. The duplicated hyperstack is closed.

**Step 4:** Transformation matrices are read from the text file and applied to the first channel (C=1) of the original hyperstack. This process is repeated for all the channels (2nd, 3rd, 4th...so on) of the original hyperstack.

**Step 5:** All the registered channels are combined into a hyperstack.

# Batch processing
Plugin is macro recordable, so a folder full of files can be processed in batch. Check the supplied "HyperStackReg_processFolder.ijm" macro for example.

Same as in version 4, except user can now select the channels to be used for transformation matrix computation. For example,
    run("HyperStackReg v05", "transformation=Affine channel3 channel4 show");

# Acknowledgements
This plugin was generated by borrowing codes from [StackReg](http://bigwww.epfl.ch/thevenaz/stackreg/) and [MultiStackReg](http://bradbusse.net/downloads.html) plugins.

# Contact
vedsharma (at) gmail (dot) com

    
    
